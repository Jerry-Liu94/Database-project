<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management - 用戶管理</title>
    <link rel="stylesheet" href="css/style.css"> 
    <link rel="stylesheet" href="css/audit.css"> 
    <link rel="stylesheet" href="css/user.css"> 
</head>
<body>

    <header>
    <div class="logo-area">
        <a href="user_management.html">
            <img src="static/image/logo.png" alt="Logo" class="logo-img">
        </a>
    </div>
        <div class="header-title">RedAnt 管理中心</div>
        <a href="profile.html">
            <img src="static/image/person_white.png" alt="User" class="icon-btn-img">
        </a>
    </header>


    <main class="audit-main full-width-layout">
        
        <div class="filter-bar">
            <div class="space-pusher"></div>
            <div class="action-buttons-group">
                <a href="audit_log.html" class="audit-log-btn">稽核日誌</a>
                <button class="add-user-btn">新增使用者</button> 
            </div>
        </div>

        <div class="audit-content-container">
            <div class="table-scroll-wrapper"> 
                <table class="audit-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>姓名</th>
                            <th>角色</th>
                            <th>帳號</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>
        </div>
        
        
    </main>

<div id="user-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <h3 class="modal-title">新增使用者</h3>
        
        <div class="form-group">
            <label for="new-user-name">姓名</label>
            <input type="text" id="new-user-name" placeholder="請輸入姓名">
        </div>

        <div class="form-group">
            <label for="new-user-email">Email</label>
            <input type="email" id="new-user-email" placeholder="example@email.com">
        </div>

        <div class="form-group">
            <label for="new-user-password">密碼</label>
            <input type="password" id="new-user-password" placeholder="設定初始密碼">
        </div>

        <div class="form-group">
            <label for="new-user-role">角色</label>
            <div class="role-select-wrapper">
                <select id="new-user-role" class="role-select-modal">
                    <option value="1">Admin</option>
                    <option value="2" selected>User</option>
                </select>
            </div>
        </div>
        
        <div class="modal-actions">
            <button class="confirm-btn" id="modal-confirm-add">確認新增</button>
            <button class="cancel-btn" id="modal-cancel-add">取消</button>
        </div>
    </div>
</div>
    
<div id="confirm-modal" class="modal-overlay hidden">
    <div class="modal-content small-content">
        <h3 class="modal-title">確定刪除此帳號？</h3>
        
        <div class="modal-actions confirm-actions">
            <button class="confirm-btn modal-confirm-btn">確認</button> 
            <button class="cancel-btn modal-cancel-btn">取消</button>
        </div>
    </div>
</div>

<script>
        document.addEventListener('DOMContentLoaded', () => {
            // 獲取元素
            const addUserBtn = document.querySelector('.add-user-btn');
            const modal = document.getElementById('user-modal');
            const confirmBtn = document.querySelector('.confirm-btn'); // 假設確認按鈕也用來關閉

            // 1. 點擊「新增使用者」按鈕，顯示彈窗
            addUserBtn.addEventListener('click', () => {
                modal.classList.remove('hidden');
            });

            // 2. 點擊「確認」按鈕，隱藏彈窗
            confirmBtn.addEventListener('click', () => {
                // 這裡應該加上表單驗證和資料提交邏輯
                modal.classList.add('hidden');
            });
            
            // 3. 點擊遮罩層（彈窗外部）隱藏彈窗 (可選，但推薦)
            modal.addEventListener('click', (e) => {
                // 檢查點擊是否發生在 modal-overlay 本身上，而非 modal-content 內部
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });

            // 4. 也可以添加一個取消按鈕或 X 關閉按鈕
        });

        document.addEventListener('DOMContentLoaded', () => {
            // ... (保留之前的 addUserBtn 和 userModal 邏輯) ...

            // 獲取確認彈窗相關元素
            const confirmModal = document.getElementById('confirm-modal');
            const deleteButtons = document.querySelectorAll('.delete-btn'); // 操作欄位中的垃圾桶按鈕
            const confirmModalCancelBtn = document.querySelector('#confirm-modal .modal-cancel-btn');
            const confirmModalConfirmBtn = document.querySelector('#confirm-modal .modal-confirm-btn');

            // 1. 點擊操作欄位的 Delete/停用按鈕，顯示確認彈窗
            deleteButtons.forEach(button => {
                button.addEventListener('click', () => {
                    confirmModal.classList.remove('hidden');
                    // 實際應用中，您會在這裡記錄要停用的使用者 ID
                });
            });

            // 2. 點擊「取消」按鈕，隱藏確認彈窗
            confirmModalCancelBtn.addEventListener('click', () => {
                confirmModal.classList.add('hidden');
            });

            // 3. 點擊「確認」按鈕（執行停用操作），隱藏確認彈窗
            confirmModalConfirmBtn.addEventListener('click', () => {
                // 實際的停用（Disable）API 請求或邏輯放在這裡
                console.log("使用者帳號已確認停用。"); 
                confirmModal.classList.add('hidden');
                // 之後需要更新表格的「狀態」欄位
            });

            // 4. 點擊遮罩層（彈窗外部）隱藏彈窗 (同樣適用於此確認彈窗)
            confirmModal.addEventListener('click', (e) => {
                if (e.target === confirmModal) {
                    confirmModal.classList.add('hidden');
                }
            });

        });
    </script>

<script type="module" src="js/user_management.js"></script>
</body>
</html>